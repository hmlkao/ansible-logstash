[Unit]
Description=Logstash-{{ ls_instance_name }}
Documentation=http://www.elastic.co
Wants=network-online.target
After=network-online.target

[Service]
Type=simple

WorkingDirectory={{ ls_home }}

User={{ ls_user }}
Group={{ ls_group }}
# Load env vars from /etc/default/ and /etc/sysconfig/ if they exist.
# Prefixing the path with '-' makes it try to load, but if the file doesn't
# exist, it continues onward.
EnvironmentFile=-/etc/default/{{ instance_default_file | basename }}
EnvironmentFile=-/etc/sysconfig/{{ instance_default_file | basename }}

ExecStart={{ ls_home }}/bin/logstash "--path.settings" {{ conf_dir }}
Restart=always
Nice={{ ls_nicenest }}
LimitNOFILE={{ ls_max_open_files }}

[Install]
WantedBy=multi-user.target
